{"ast":null,"code":"import { throwError } from 'rxjs';\nimport { catchError, map } from 'rxjs/operators';\nimport { environment } from '../../environments/environment';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nexport class ProfesorServicio {\n  constructor(http) {\n    this.http = http;\n    this.apiUrl = `${environment.apiUrl}/profesores`;\n  }\n  obtenerProfesores() {\n    return this.http.get(this.apiUrl).pipe(map(respuesta => {\n      console.log('Respuesta del servidor para profesores:', respuesta);\n      if (respuesta && respuesta.exito && respuesta.data) {\n        return respuesta.data.map(item => {\n          console.log('Item de profesor:', item);\n          return {\n            id: item.id,\n            nombre: item.nombre,\n            apellido: item.apellido || '',\n            // Intentar obtener el email de cualquiera de los dos campos posibles\n            email: item.email || item.correo || '',\n            departamento: item.departamento || '',\n            nombreCompleto: `${item.nombre} ${item.apellido || ''}`.trim()\n          };\n        });\n      }\n      return [];\n    }), catchError(this.manejarError));\n  }\n  obtenerProfesor(id) {\n    return this.http.get(`${this.apiUrl}/${id}`).pipe(map(respuesta => {\n      if (respuesta && respuesta.exito && respuesta.data) {\n        const item = respuesta.data;\n        return {\n          id: item.id,\n          nombre: item.nombre,\n          apellido: item.apellido || '',\n          email: item.email || '',\n          departamento: item.departamento || '',\n          nombreCompleto: `${item.nombre} ${item.apellido || ''}`.trim()\n        };\n      }\n      throw new Error('Profesor no encontrado');\n    }), catchError(this.manejarError));\n  }\n  crearProfesor(profesor) {\n    // Filtrar solo los campos necesarios para el backend\n    const profesorData = {\n      nombre: profesor.nombre,\n      email: profesor.email,\n      departamento: profesor.departamento\n    };\n    return this.http.post(this.apiUrl, profesorData).pipe(catchError(this.manejarError));\n  }\n  actualizarProfesor(id, profesor) {\n    // Filtrar solo los campos necesarios para el backend\n    const profesorData = {\n      nombre: profesor.nombre,\n      email: profesor.email,\n      departamento: profesor.departamento\n    };\n    return this.http.put(`${this.apiUrl}/${id}`, profesorData).pipe(catchError(this.manejarError));\n  }\n  eliminarProfesor(id) {\n    return this.http.delete(`${this.apiUrl}/${id}`).pipe(catchError(this.manejarError));\n  }\n  manejarError(error) {\n    let mensajeError = 'u00a1Ocurriu00f3 un error desconocido!';\n    if (error.error instanceof ErrorEvent) {\n      mensajeError = `Error: ${error.error.message}`;\n    } else if (error.error && error.error.message) {\n      mensajeError = error.error.message;\n    } else if (error.status) {\n      mensajeError = `Error ${error.status}: ${error.statusText}`;\n    }\n    return throwError(() => new Error(mensajeError));\n  }\n  static {\n    this.ɵfac = function ProfesorServicio_Factory(t) {\n      return new (t || ProfesorServicio)(i0.ɵɵinject(i1.HttpClient));\n    };\n  }\n  static {\n    this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n      token: ProfesorServicio,\n      factory: ProfesorServicio.ɵfac,\n      providedIn: 'root'\n    });\n  }\n}","map":{"version":3,"mappings":"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","names":["throwError","catchError","map","environment","ProfesorServicio","constructor","http","apiUrl","obtenerProfesores","get","pipe","respuesta","console","log","exito","data","item","id","nombre","apellido","email","correo","departamento","nombreCompleto","trim","manejarError","obtenerProfesor","Error","crearProfesor","profesor","profesorData","post","actualizarProfesor","put","eliminarProfesor","delete","error","mensajeError","ErrorEvent","message","status","statusText","factory","providedIn"],"sourceRoot":"","sources":["C:\\Users\\hansk\\Videos\\frontendsistemacolegio.interrapidisi\\frontendsistemacolegio.interrapidisi\\src\\app\\servicios\\profesor.servicio.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { Observable, throwError } from 'rxjs';\nimport { catchError, map } from 'rxjs/operators';\nimport { Profesor } from '../modelos/profesor.modelo';\nimport { environment } from '../../environments/environment';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class ProfesorServicio {\n  private apiUrl = `${environment.apiUrl}/profesores`;\n\n  constructor(private http: HttpClient) { }\n\n  obtenerProfesores(): Observable<Profesor[]> {\n    return this.http.get<any>(this.apiUrl)\n      .pipe(\n        map(respuesta => {\n          console.log('Respuesta del servidor para profesores:', respuesta);\n          if (respuesta && respuesta.exito && respuesta.data) {\n            return respuesta.data.map((item: any) => {\n              console.log('Item de profesor:', item);\n              return {\n                id: item.id,\n                nombre: item.nombre,\n                apellido: item.apellido || '',\n                // Intentar obtener el email de cualquiera de los dos campos posibles\n                email: item.email || item.correo || '',\n                departamento: item.departamento || '',\n                nombreCompleto: `${item.nombre} ${item.apellido || ''}`.trim()\n              };\n            });\n          }\n          return [];\n        }),\n        catchError(this.manejarError)\n      );\n  }\n\n  obtenerProfesor(id: number): Observable<Profesor> {\n    return this.http.get<any>(`${this.apiUrl}/${id}`)\n      .pipe(\n        map(respuesta => {\n          if (respuesta && respuesta.exito && respuesta.data) {\n            const item = respuesta.data;\n            return {\n              id: item.id,\n              nombre: item.nombre,\n              apellido: item.apellido || '',\n              email: item.email || '',\n              departamento: item.departamento || '',\n              nombreCompleto: `${item.nombre} ${item.apellido || ''}`.trim()\n            };\n          }\n          throw new Error('Profesor no encontrado');\n        }),\n        catchError(this.manejarError)\n      );\n  }\n\n  crearProfesor(profesor: Profesor): Observable<any> {\n    // Filtrar solo los campos necesarios para el backend\n    const profesorData = {\n      nombre: profesor.nombre,\n      email: profesor.email,\n      departamento: profesor.departamento\n    };\n    \n    return this.http.post<any>(this.apiUrl, profesorData)\n      .pipe(\n        catchError(this.manejarError)\n      );\n  }\n\n  actualizarProfesor(id: number, profesor: Profesor): Observable<any> {\n    // Filtrar solo los campos necesarios para el backend\n    const profesorData = {\n      nombre: profesor.nombre,\n      email: profesor.email,\n      departamento: profesor.departamento\n    };\n    \n    return this.http.put<any>(`${this.apiUrl}/${id}`, profesorData)\n      .pipe(\n        catchError(this.manejarError)\n      );\n  }\n\n  eliminarProfesor(id: number): Observable<any> {\n    return this.http.delete<any>(`${this.apiUrl}/${id}`)\n      .pipe(\n        catchError(this.manejarError)\n      );\n  }\n\n  private manejarError(error: any) {\n    let mensajeError = 'u00a1Ocurriu00f3 un error desconocido!';\n    if (error.error instanceof ErrorEvent) {\n      mensajeError = `Error: ${error.error.message}`;\n    } else if (error.error && error.error.message) {\n      mensajeError = error.error.message;\n    } else if (error.status) {\n      mensajeError = `Error ${error.status}: ${error.statusText}`;\n    }\n    return throwError(() => new Error(mensajeError));\n  }\n}"]},"metadata":{},"sourceType":"module","externalDependencies":[]}