{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/registration.service\";\nimport * as i2 from \"../../services/subject.service\";\nimport * as i3 from \"@angular/common\";\nfunction ClassmatesComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 3);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.error, \"\\n\");\n  }\n}\nfunction ClassmatesComponent_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 4)(1, \"div\", 5)(2, \"span\", 6);\n    i0.ɵɵtext(3, \"Cargando...\");\n    i0.ɵɵelementEnd()()();\n  }\n}\nfunction ClassmatesComponent_div_2_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 12);\n    i0.ɵɵtext(1, \" No hay otros estudiantes registrados en esta materia. \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ClassmatesComponent_div_2_div_8_tr_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\", 17)(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const student_r6 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(student_r6.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(student_r6.email);\n  }\n}\nfunction ClassmatesComponent_div_2_div_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 13)(1, \"table\", 14)(2, \"thead\", 15)(3, \"tr\")(4, \"th\");\n    i0.ɵɵtext(5, \"Nombre\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"th\");\n    i0.ɵɵtext(7, \"Correo\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(8, \"tbody\");\n    i0.ɵɵtemplate(9, ClassmatesComponent_div_2_div_8_tr_9_Template, 5, 2, \"tr\", 16);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(9);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r4.classmates);\n  }\n}\nfunction ClassmatesComponent_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"div\", 7)(2, \"h5\", 8)(3, \"strong\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(5, \"span\", 9);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(7, ClassmatesComponent_div_2_div_7_Template, 2, 0, \"div\", 10);\n    i0.ɵɵtemplate(8, ClassmatesComponent_div_2_div_8_Template, 10, 1, \"div\", 11);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ctx_r2.subjectName);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\", ctx_r2.classmates.length, \" compau00f1ero(s)\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.classmates.length === 0);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.classmates.length > 0);\n  }\n}\nexport class ClassmatesComponent {\n  constructor(registrationService, subjectService) {\n    this.registrationService = registrationService;\n    this.subjectService = subjectService;\n    this.classmates = [];\n    this.subjectName = '';\n    this.loading = false;\n    this.error = '';\n  }\n  ngOnInit() {\n    this.loadData();\n  }\n  ngOnChanges(changes) {\n    // Si cambia el subjectId, recargamos los datos\n    if (changes['subjectId'] && !changes['subjectId'].firstChange) {\n      this.loadData();\n    }\n  }\n  loadData() {\n    if (!this.subjectId) {\n      this.error = 'ID de materia no válido';\n      return;\n    }\n    this.loadClassmates();\n    this.loadSubjectName();\n  }\n  loadClassmates() {\n    this.loading = true;\n    this.error = '';\n    this.registrationService.getClassmates(this.subjectId, this.currentStudentId).subscribe({\n      next: students => {\n        this.classmates = students;\n        this.loading = false;\n        console.log(`Cargados ${students.length} compañeros para la materia ${this.subjectId}`);\n      },\n      error: err => {\n        this.error = 'Error al cargar compañeros de clase';\n        this.loading = false;\n        console.error('Error al cargar compañeros:', err);\n      }\n    });\n  }\n  loadSubjectName() {\n    this.subjectService.getSubject(this.subjectId).subscribe({\n      next: subject => {\n        this.subjectName = subject.name;\n        console.log(`Nombre de la materia cargado: ${this.subjectName}`);\n      },\n      error: err => {\n        console.error('Error al cargar nombre de la materia:', err);\n      }\n    });\n  }\n  static {\n    this.ɵfac = function ClassmatesComponent_Factory(t) {\n      return new (t || ClassmatesComponent)(i0.ɵɵdirectiveInject(i1.RegistrationService), i0.ɵɵdirectiveInject(i2.SubjectService));\n    };\n  }\n  static {\n    this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: ClassmatesComponent,\n      selectors: [[\"app-classmates\"]],\n      inputs: {\n        subjectId: \"subjectId\",\n        currentStudentId: \"currentStudentId\"\n      },\n      features: [i0.ɵɵNgOnChangesFeature],\n      decls: 3,\n      vars: 3,\n      consts: [[\"class\", \"alert alert-danger\", 4, \"ngIf\"], [\"class\", \"d-flex justify-content-center my-3\", 4, \"ngIf\"], [4, \"ngIf\"], [1, \"alert\", \"alert-danger\"], [1, \"d-flex\", \"justify-content-center\", \"my-3\"], [\"role\", \"status\", 1, \"spinner-border\", \"text-primary\"], [1, \"visually-hidden\"], [1, \"d-flex\", \"justify-content-between\", \"align-items-center\", \"mb-3\"], [1, \"mb-0\"], [1, \"badge\", \"bg-primary\"], [\"class\", \"alert alert-info\", 4, \"ngIf\"], [\"class\", \"table-responsive\", 4, \"ngIf\"], [1, \"alert\", \"alert-info\"], [1, \"table-responsive\"], [1, \"table\", \"table-striped\", \"table-hover\"], [1, \"table-light\"], [\"data-testid\", \"classmate-row\", 4, \"ngFor\", \"ngForOf\"], [\"data-testid\", \"classmate-row\"]],\n      template: function ClassmatesComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵtemplate(0, ClassmatesComponent_div_0_Template, 2, 1, \"div\", 0);\n          i0.ɵɵtemplate(1, ClassmatesComponent_div_1_Template, 4, 0, \"div\", 1);\n          i0.ɵɵtemplate(2, ClassmatesComponent_div_2_Template, 9, 4, \"div\", 2);\n        }\n        if (rf & 2) {\n          i0.ɵɵproperty(\"ngIf\", ctx.error);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", ctx.loading);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", !ctx.loading && !ctx.error);\n        }\n      },\n      dependencies: [i3.NgForOf, i3.NgIf],\n      styles: [\".list-group-item[_ngcontent-%COMP%] {\\n  padding: 0.5rem 1rem;\\n  font-size: 0.9rem;\\n}\\n\\n.alert[_ngcontent-%COMP%] {\\n  padding: 0.5rem 1rem;\\n  margin-bottom: 0;\\n  font-size: 0.9rem;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY29tcG9uZW50cy9jbGFzc21hdGVzL2NsYXNzbWF0ZXMuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxnQ0FBZ0M7QUFDaEM7RUFDRSxvQkFBb0I7RUFDcEIsaUJBQWlCO0FBQ25COztBQUVBO0VBQ0Usb0JBQW9CO0VBQ3BCLGdCQUFnQjtFQUNoQixpQkFBaUI7QUFDbkIiLCJzb3VyY2VzQ29udGVudCI6WyIvKiBDbGFzc21hdGVzIENvbXBvbmVudCBTdHlsZXMgKi9cbi5saXN0LWdyb3VwLWl0ZW0ge1xuICBwYWRkaW5nOiAwLjVyZW0gMXJlbTtcbiAgZm9udC1zaXplOiAwLjlyZW07XG59XG5cbi5hbGVydCB7XG4gIHBhZGRpbmc6IDAuNXJlbSAxcmVtO1xuICBtYXJnaW4tYm90dG9tOiAwO1xuICBmb250LXNpemU6IDAuOXJlbTtcbn0iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n    });\n  }\n}","map":{"version":3,"mappings":"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","names":["i0","ClassmatesComponent","constructor","registrationService","subjectService","ngOnInit","loadData","ngOnChanges","changes","firstChange","subjectId","error","loadClassmates","loadSubjectName","loading","getClassmates","currentStudentId","subscribe","next","students","classmates","console","log","length","err","getSubject","subject","subjectName","name","selectors","inputs","features","decls","vars","consts","template"],"sourceRoot":"","sources":["C:\\Users\\hansk\\Videos\\Prueba interrapidisimp\\frontend\\src\\app\\components\\classmates\\classmates.component.html","C:\\Users\\hansk\\Videos\\Prueba interrapidisimp\\frontend\\src\\app\\components\\classmates\\classmates.component.ts"],"sourcesContent":["<div *ngIf=\"error\" class=\"alert alert-danger\">\n  {{ error }}\n</div>\n\n<div *ngIf=\"loading\" class=\"d-flex justify-content-center my-3\">\n  <div class=\"spinner-border text-primary\" role=\"status\">\n    <span class=\"visually-hidden\">Cargando...</span>\n  </div>\n</div>\n\n<div *ngIf=\"!loading && !error\">\n  <div class=\"d-flex justify-content-between align-items-center mb-3\">\n    <h5 class=\"mb-0\"><strong>{{ subjectName }}</strong></h5>\n    <span class=\"badge bg-primary\">{{ classmates.length }} compau00f1ero(s)</span>\n  </div>\n  \n  <div *ngIf=\"classmates.length === 0\" class=\"alert alert-info\">\n    No hay otros estudiantes registrados en esta materia.\n  </div>\n  \n  <div class=\"table-responsive\" *ngIf=\"classmates.length > 0\">\n    <table class=\"table table-striped table-hover\">\n      <thead class=\"table-light\">\n        <tr>\n          <th>Nombre</th>\n          <th>Correo</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr *ngFor=\"let student of classmates\" data-testid=\"classmate-row\">\n          <td>{{ student.name }}</td>\n          <td>{{ student.email }}</td>\n        </tr>\n      </tbody>\n    </table>\n  </div>\n</div>","import { Component, Input, OnInit, OnChanges, SimpleChanges } from '@angular/core';\nimport { RegistrationService } from '../../services/registration.service';\nimport { Student } from '../../models/student.model';\nimport { SubjectService } from '../../services/subject.service';\n\n@Component({\n  selector: 'app-classmates',\n  templateUrl: './classmates.component.html',\n  styleUrls: ['./classmates.component.css']\n})\nexport class ClassmatesComponent implements OnInit, OnChanges {\n  @Input() subjectId!: number;\n  @Input() currentStudentId!: number;\n  \n  classmates: Student[] = [];\n  subjectName: string = '';\n  loading = false;\n  error = '';\n\n  constructor(\n    private registrationService: RegistrationService,\n    private subjectService: SubjectService\n  ) { }\n\n  ngOnInit(): void {\n    this.loadData();\n  }\n\n  ngOnChanges(changes: SimpleChanges): void {\n    // Si cambia el subjectId, recargamos los datos\n    if (changes['subjectId'] && !changes['subjectId'].firstChange) {\n      this.loadData();\n    }\n  }\n\n  loadData(): void {\n    if (!this.subjectId) {\n      this.error = 'ID de materia no válido';\n      return;\n    }\n    \n    this.loadClassmates();\n    this.loadSubjectName();\n  }\n\n  loadClassmates(): void {\n    this.loading = true;\n    this.error = '';\n    \n    this.registrationService.getClassmates(this.subjectId, this.currentStudentId).subscribe({\n      next: (students) => {\n        this.classmates = students;\n        this.loading = false;\n        console.log(`Cargados ${students.length} compañeros para la materia ${this.subjectId}`);\n      },\n      error: (err) => {\n        this.error = 'Error al cargar compañeros de clase';\n        this.loading = false;\n        console.error('Error al cargar compañeros:', err);\n      }\n    });\n  }\n\n  loadSubjectName(): void {\n    this.subjectService.getSubject(this.subjectId).subscribe({\n      next: (subject) => {\n        this.subjectName = subject.name;\n        console.log(`Nombre de la materia cargado: ${this.subjectName}`);\n      },\n      error: (err) => {\n        console.error('Error al cargar nombre de la materia:', err);\n      }\n    });\n  }\n}"]},"metadata":{},"sourceType":"module","externalDependencies":[]}