{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"../../servicios/materia.servicio\";\nimport * as i3 from \"../../servicios/autenticacion.servicio\";\nimport * as i4 from \"../../servicios/inscripcion.servicio\";\nimport * as i5 from \"@angular/common\";\nfunction DetalleMateriaComponente_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 4);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.error, \" \");\n  }\n}\nfunction DetalleMateriaComponente_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 5)(1, \"div\", 6)(2, \"span\", 7);\n    i0.ɵɵtext(3, \"Cargando...\");\n    i0.ɵɵelementEnd()()();\n  }\n}\nfunction DetalleMateriaComponente_div_3_div_25_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 22);\n    i0.ɵɵtext(1, \" No hay estudiantes registrados en esta materia. \");\n    i0.ɵɵelementEnd();\n  }\n}\nconst _c0 = function (a1) {\n  return [\"/estudiantes\", a1];\n};\nfunction DetalleMateriaComponente_div_3_div_25_div_7_tr_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\")(6, \"button\", 26);\n    i0.ɵɵelement(7, \"i\", 27);\n    i0.ɵɵtext(8, \" Ver Perfil \");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const estudiante_r8 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(estudiante_r8.matricula);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(estudiante_r8.nombre);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(3, _c0, estudiante_r8.id));\n  }\n}\nfunction DetalleMateriaComponente_div_3_div_25_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 23)(1, \"table\", 24)(2, \"thead\")(3, \"tr\")(4, \"th\");\n    i0.ɵɵtext(5, \"Matr\\u00EDcula\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"th\");\n    i0.ɵɵtext(7, \"Nombre\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"th\");\n    i0.ɵɵtext(9, \"Acciones\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(10, \"tbody\");\n    i0.ɵɵtemplate(11, DetalleMateriaComponente_div_3_div_25_div_7_tr_11_Template, 9, 5, \"tr\", 25);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r6 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(11);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r6.estudiantes);\n  }\n}\nfunction DetalleMateriaComponente_div_3_div_25_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 18)(1, \"div\", 19)(2, \"div\", 13)(3, \"h5\", 14);\n    i0.ɵɵtext(4, \"Estudiantes Registrados\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(5, \"div\", 15);\n    i0.ɵɵtemplate(6, DetalleMateriaComponente_div_3_div_25_div_6_Template, 2, 0, \"div\", 20);\n    i0.ɵɵtemplate(7, DetalleMateriaComponente_div_3_div_25_div_7_Template, 12, 1, \"div\", 21);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"ngIf\", ctx_r3.estudiantes.length === 0);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r3.estudiantes.length > 0);\n  }\n}\nfunction DetalleMateriaComponente_div_3_div_26_div_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 22);\n    i0.ɵɵtext(1, \" No tienes compa\\u00F1eros registrados en esta materia. \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction DetalleMateriaComponente_div_3_div_26_div_19_tr_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const companero_r12 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(companero_r12.nombre);\n  }\n}\nfunction DetalleMateriaComponente_div_3_div_26_div_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 23)(1, \"table\", 24)(2, \"thead\")(3, \"tr\")(4, \"th\");\n    i0.ɵɵtext(5, \"Nombre\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(6, \"tbody\");\n    i0.ɵɵtemplate(7, DetalleMateriaComponente_div_3_div_26_div_19_tr_7_Template, 3, 1, \"tr\", 25);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r10 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(7);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r10.companeros);\n  }\n}\nfunction DetalleMateriaComponente_div_3_div_26_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 18)(1, \"div\", 12)(2, \"div\", 13)(3, \"h5\", 14);\n    i0.ɵɵtext(4, \"Informaci\\u00F3n para Estudiantes\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(5, \"div\", 15)(6, \"div\", 22)(7, \"p\");\n    i0.ɵɵtext(8, \"Est\\u00E1s registrado en esta materia.\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"p\");\n    i0.ɵɵtext(10, \"Profesor: \");\n    i0.ɵɵelementStart(11, \"strong\");\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd()()()()();\n    i0.ɵɵelementStart(13, \"div\", 19)(14, \"div\", 13)(15, \"h5\", 14);\n    i0.ɵɵtext(16, \"Tus Compa\\u00F1eros de Clase\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(17, \"div\", 15);\n    i0.ɵɵtemplate(18, DetalleMateriaComponente_div_3_div_26_div_18_Template, 2, 0, \"div\", 20);\n    i0.ɵɵtemplate(19, DetalleMateriaComponente_div_3_div_26_div_19_Template, 8, 1, \"div\", 21);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(12);\n    i0.ɵɵtextInterpolate2(\"\", ctx_r4.materia.profesor == null ? null : ctx_r4.materia.profesor.nombre, \" \", ctx_r4.materia.profesor == null ? null : ctx_r4.materia.profesor.apellido, \"\");\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"ngIf\", ctx_r4.companeros.length === 0);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r4.companeros.length > 0);\n  }\n}\nfunction DetalleMateriaComponente_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"div\", 8)(2, \"h2\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"button\", 9);\n    i0.ɵɵtext(5, \"Volver\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(6, \"div\", 10)(7, \"div\", 11)(8, \"div\", 12)(9, \"div\", 13)(10, \"h5\", 14);\n    i0.ɵɵtext(11, \"Informaci\\u00F3n de la Materia\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(12, \"div\", 15)(13, \"div\", 16)(14, \"strong\");\n    i0.ɵɵtext(15, \"Nombre:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(16);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(17, \"div\", 16)(18, \"strong\");\n    i0.ɵɵtext(19, \"Cr\\u00E9ditos:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(20);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(21, \"div\", 16)(22, \"strong\");\n    i0.ɵɵtext(23, \"Profesor:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(24);\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵtemplate(25, DetalleMateriaComponente_div_3_div_25_Template, 8, 2, \"div\", 17);\n    i0.ɵɵtemplate(26, DetalleMateriaComponente_div_3_div_26_Template, 20, 4, \"div\", 17);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(ctx_r2.materia.nombre);\n    i0.ɵɵadvance(13);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r2.materia.nombre, \" \");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r2.materia.creditos, \" \");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r2.materia.profesor == null ? null : ctx_r2.materia.profesor.nombre, \" \");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r2.esEstudiante);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.esEstudiante);\n  }\n}\nexport class DetalleMateriaComponente {\n  constructor(ruta, materiaServicio, autenticacionServicio, inscripcionServicio) {\n    this.ruta = ruta;\n    this.materiaServicio = materiaServicio;\n    this.autenticacionServicio = autenticacionServicio;\n    this.inscripcionServicio = inscripcionServicio;\n    this.materia = null;\n    this.estudiantes = [];\n    this.companeros = [];\n    this.cargando = false;\n    this.error = '';\n    this.usuarioActualId = null;\n    this.esEstudiante = false;\n    this.esProfesor = false;\n  }\n  ngOnInit() {\n    // Obtener el ID del usuario actual desde el servicio de autenticación\n    const usuarioActual = this.autenticacionServicio.obtenerUsuarioActual().subscribe(user => {\n      if (user && user.id) {\n        this.usuarioActualId = user.id;\n      }\n    });\n    this.esEstudiante = this.autenticacionServicio.esEstudiante();\n    this.esProfesor = this.autenticacionServicio.esProfesor && this.autenticacionServicio.esProfesor();\n    this.ruta.params.subscribe(params => {\n      const id = params['id'];\n      if (id && !isNaN(Number(id))) {\n        const materiaId = Number(id);\n        this.cargarMateria(materiaId);\n        if (!this.esEstudiante) {\n          this.cargarEstudiantes(materiaId);\n        } else if (this.usuarioActualId) {\n          this.cargarCompaneros(materiaId, this.usuarioActualId);\n        }\n      } else {\n        this.error = 'ID de materia invu00e1lido';\n      }\n    });\n  }\n  cargarMateria(id) {\n    if (!id || isNaN(id)) {\n      this.error = 'ID de materia invu00e1lido';\n      return;\n    }\n    this.cargando = true;\n    this.materiaServicio.obtenerMateria(id).subscribe({\n      next: data => {\n        this.materia = data;\n        this.cargando = false;\n      },\n      error: err => {\n        this.error = 'Error al cargar datos de la materia';\n        this.cargando = false;\n        console.error(err);\n      }\n    });\n  }\n  cargarEstudiantes(materiaId) {\n    if (!materiaId || isNaN(materiaId)) {\n      this.error = 'ID de materia invu00e1lido';\n      return;\n    }\n    this.cargando = true;\n    this.materiaServicio.obtenerEstudiantesPorMateria(materiaId, this.esProfesor).subscribe({\n      next: data => {\n        this.estudiantes = data;\n        this.cargando = false;\n      },\n      error: err => {\n        if (err.message === 'NO_PERMISOS') {\n          this.error = 'No tienes permisos para ver los estudiantes de esta materia.';\n        } else if (err.message === 'NO_ENCONTRADO') {\n          this.error = 'Materia no encontrada.';\n        } else {\n          this.error = 'Error al cargar estudiantes de la materia';\n        }\n        this.cargando = false;\n        console.error(err);\n      }\n    });\n  }\n  cargarCompaneros(materiaId, estudianteId) {\n    if (!materiaId || isNaN(materiaId) || !estudianteId || isNaN(estudianteId)) {\n      this.error = 'ID de materia o estudiante invu00e1lido';\n      return;\n    }\n    this.cargando = true;\n    this.inscripcionServicio.obtenerInscripcionesAsignatura(materiaId).subscribe({\n      next: data => {\n        console.log('Inscripciones obtenidas:', data);\n        this.companeros = data;\n        this.cargando = false;\n      },\n      error: err => {\n        this.error = 'Error al cargar compau00f1eros de clase';\n        this.cargando = false;\n        console.error(err);\n      }\n    });\n  }\n  static {\n    this.ɵfac = function DetalleMateriaComponente_Factory(t) {\n      return new (t || DetalleMateriaComponente)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.MateriaServicio), i0.ɵɵdirectiveInject(i3.AutenticacionServicio), i0.ɵɵdirectiveInject(i4.InscripcionServicio));\n    };\n  }\n  static {\n    this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: DetalleMateriaComponente,\n      selectors: [[\"app-detalle-materia\"]],\n      decls: 4,\n      vars: 3,\n      consts: [[1, \"container\", \"mt-4\"], [\"class\", \"alert alert-danger\", 4, \"ngIf\"], [\"class\", \"d-flex justify-content-center\", 4, \"ngIf\"], [4, \"ngIf\"], [1, \"alert\", \"alert-danger\"], [1, \"d-flex\", \"justify-content-center\"], [\"role\", \"status\", 1, \"spinner-border\"], [1, \"visually-hidden\"], [1, \"d-flex\", \"justify-content-between\", \"align-items-center\", \"mb-4\"], [\"routerLink\", \"/materias\", 1, \"btn\", \"btn-outline-secondary\"], [1, \"row\"], [1, \"col-md-4\"], [1, \"card\", \"mb-4\"], [1, \"card-header\", \"bg-primary\", \"text-white\"], [1, \"mb-0\"], [1, \"card-body\"], [1, \"mb-3\"], [\"class\", \"col-md-8\", 4, \"ngIf\"], [1, \"col-md-8\"], [1, \"card\"], [\"class\", \"alert alert-info\", 4, \"ngIf\"], [\"class\", \"table-responsive\", 4, \"ngIf\"], [1, \"alert\", \"alert-info\"], [1, \"table-responsive\"], [1, \"table\", \"table-striped\"], [4, \"ngFor\", \"ngForOf\"], [1, \"btn\", \"btn-sm\", \"btn-outline-primary\", 3, \"routerLink\"], [1, \"bi\", \"bi-eye\"]],\n      template: function DetalleMateriaComponente_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0);\n          i0.ɵɵtemplate(1, DetalleMateriaComponente_div_1_Template, 2, 1, \"div\", 1);\n          i0.ɵɵtemplate(2, DetalleMateriaComponente_div_2_Template, 4, 0, \"div\", 2);\n          i0.ɵɵtemplate(3, DetalleMateriaComponente_div_3_Template, 27, 6, \"div\", 3);\n          i0.ɵɵelementEnd();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", ctx.error);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", ctx.cargando);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", ctx.materia && !ctx.cargando);\n        }\n      },\n      dependencies: [i5.NgForOf, i5.NgIf, i1.RouterLink],\n      styles: [\".card[_ngcontent-%COMP%] {\\n  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\\n  margin-bottom: 20px;\\n}\\n\\n.card-header[_ngcontent-%COMP%] {\\n  font-weight: 500;\\n}\\n\\n.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%] {\\n  font-weight: 600;\\n  background-color: #f8f9fa;\\n}\\n\\nstrong[_ngcontent-%COMP%] {\\n  font-weight: 600;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY29tcG9uZW50ZXMvYXNpZ25hdHVyYXMvZGV0YWxsZS1tYXRlcmlhLmNvbXBvbmVudGUuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLG9EQUFvRDtBQUNwRDtFQUNFLHdDQUF3QztFQUN4QyxtQkFBbUI7QUFDckI7O0FBRUE7RUFDRSxnQkFBZ0I7QUFDbEI7O0FBRUE7RUFDRSxnQkFBZ0I7RUFDaEIseUJBQXlCO0FBQzNCOztBQUVBO0VBQ0UsZ0JBQWdCO0FBQ2xCIiwic291cmNlc0NvbnRlbnQiOlsiLyogRXN0aWxvcyBkZWwgY29tcG9uZW50ZSBEZXRhbGxlTWF0ZXJpYUNvbXBvbmVudGUgKi9cbi5jYXJkIHtcbiAgYm94LXNoYWRvdzogMCA0cHggOHB4IHJnYmEoMCwgMCwgMCwgMC4xKTtcbiAgbWFyZ2luLWJvdHRvbTogMjBweDtcbn1cblxuLmNhcmQtaGVhZGVyIHtcbiAgZm9udC13ZWlnaHQ6IDUwMDtcbn1cblxuLnRhYmxlIHRoIHtcbiAgZm9udC13ZWlnaHQ6IDYwMDtcbiAgYmFja2dyb3VuZC1jb2xvcjogI2Y4ZjlmYTtcbn1cblxuc3Ryb25nIHtcbiAgZm9udC13ZWlnaHQ6IDYwMDtcbn1cbiJdLCJzb3VyY2VSb290IjoiIn0= */\"]\n    });\n  }\n}","map":{"version":3,"mappings":"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","names":["i0","DetalleMateriaComponente","constructor","ruta","materiaServicio","autenticacionServicio","inscripcionServicio","ngOnInit","usuarioActual","obtenerUsuarioActual","subscribe","user","id","usuarioActualId","esEstudiante","esProfesor","params","isNaN","Number","materiaId","cargarMateria","cargarEstudiantes","cargarCompaneros","error","cargando","obtenerMateria","next","data","materia","err","console","obtenerEstudiantesPorMateria","estudiantes","message","estudianteId","obtenerInscripcionesAsignatura","log","companeros","selectors","decls","vars","consts","template"],"sourceRoot":"","sources":["C:\\Users\\hansk\\Videos\\frontendsistemacolegio.interrapidisi\\frontendsistemacolegio.interrapidisi\\src\\app\\componentes\\asignaturas\\detalle-materia.componente.html","C:\\Users\\hansk\\Videos\\frontendsistemacolegio.interrapidisi\\frontendsistemacolegio.interrapidisi\\src\\app\\componentes\\asignaturas\\detalle-materia.componente.ts"],"sourcesContent":["<div class=\"container mt-4\">\n  <div *ngIf=\"error\" class=\"alert alert-danger\">\n    {{ error }}\n  </div>\n  \n  <div *ngIf=\"cargando\" class=\"d-flex justify-content-center\">\n    <div class=\"spinner-border\" role=\"status\">\n      <span class=\"visually-hidden\">Cargando...</span>\n    </div>\n  </div>\n  \n  <div *ngIf=\"materia && !cargando\">\n    <div class=\"d-flex justify-content-between align-items-center mb-4\">\n      <h2>{{ materia.nombre }}</h2>\n      <button class=\"btn btn-outline-secondary\" routerLink=\"/materias\">Volver</button>\n    </div>\n    \n    <div class=\"row\">\n      <div class=\"col-md-4\">\n        <div class=\"card mb-4\">\n          <div class=\"card-header bg-primary text-white\">\n            <h5 class=\"mb-0\">Información de la Materia</h5>\n          </div>\n          <div class=\"card-body\">\n            <div class=\"mb-3\">\n              <strong>Nombre:</strong> {{ materia.nombre }}\n            </div>\n            <div class=\"mb-3\">\n              <strong>Créditos:</strong> {{ materia.creditos }}\n            </div>\n            <div class=\"mb-3\">\n              <strong>Profesor:</strong> {{ materia.profesor?.nombre }}\n            </div>\n          </div>\n        </div>\n      </div>\n      \n      <!-- Solo mostrar la sección de estudiantes si no es un estudiante -->\n      <div class=\"col-md-8\" *ngIf=\"!esEstudiante\">\n        <div class=\"card\">\n          <div class=\"card-header bg-primary text-white\">\n            <h5 class=\"mb-0\">Estudiantes Registrados</h5>\n          </div>\n          <div class=\"card-body\">\n            <div *ngIf=\"estudiantes.length === 0\" class=\"alert alert-info\">\n              No hay estudiantes registrados en esta materia.\n            </div>\n            \n            <div class=\"table-responsive\" *ngIf=\"estudiantes.length > 0\">\n              <table class=\"table table-striped\">\n                <thead>\n                  <tr>\n                    <th>Matrícula</th>\n                    <th>Nombre</th>\n                    <th>Acciones</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  <tr *ngFor=\"let estudiante of estudiantes\">\n                    <td>{{ estudiante.matricula }}</td>\n                    <td>{{ estudiante.nombre }}</td>\n                    <td>\n                      <button class=\"btn btn-sm btn-outline-primary\" [routerLink]=\"['/estudiantes', estudiante.id]\">\n                        <i class=\"bi bi-eye\"></i> Ver Perfil\n                      </button>\n                    </td>\n                  </tr>\n                </tbody>\n              </table>\n            </div>\n          </div>\n        </div>\n      </div>\n      \n      <!-- Mostrar información y compañeros para estudiantes -->\n      <div class=\"col-md-8\" *ngIf=\"esEstudiante\">\n        <div class=\"card mb-4\">\n          <div class=\"card-header bg-primary text-white\">\n            <h5 class=\"mb-0\">Información para Estudiantes</h5>\n          </div>\n          <div class=\"card-body\">\n            <div class=\"alert alert-info\">\n              <p>Estás registrado en esta materia.</p>\n              <p>Profesor: <strong>{{ materia.profesor?.nombre }} {{ materia.profesor?.apellido }}</strong></p>\n            </div>\n          </div>\n        </div>\n        \n        <!-- Sección de compañeros de clase -->\n        <div class=\"card\">\n          <div class=\"card-header bg-primary text-white\">\n            <h5 class=\"mb-0\">Tus Compañeros de Clase</h5>\n          </div>\n          <div class=\"card-body\">\n            <div *ngIf=\"companeros.length === 0\" class=\"alert alert-info\">\n              No tienes compañeros registrados en esta materia.\n            </div>\n            \n            <div class=\"table-responsive\" *ngIf=\"companeros.length > 0\">\n              <table class=\"table table-striped\">\n                <thead>\n                  <tr>\n                    <th>Nombre</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  <tr *ngFor=\"let companero of companeros\">\n                    <td>{{ companero.nombre }}</td>\n                  </tr>\n                </tbody>\n              </table>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n","import { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport { Materia } from '../../modelos/materia.modelo';\nimport { Estudiante } from '../../modelos/estudiante.modelo';\nimport { MateriaServicio } from '../../servicios/materia.servicio';\nimport { AutenticacionServicio } from '../../servicios/autenticacion.servicio';\nimport { InscripcionServicio } from '../../servicios/inscripcion.servicio';\nimport { CommonModule } from '@angular/common';\nimport { RouterModule } from '@angular/router';\n\n@Component({\n  selector: 'app-detalle-materia',\n  templateUrl: './detalle-materia.componente.html',\n  styleUrls: ['./detalle-materia.componente.css']\n})\nexport class DetalleMateriaComponente implements OnInit {\n  materia: Materia | null = null;\n  estudiantes: Estudiante[] = [];\n  companeros: Estudiante[] = [];\n  cargando = false;\n  error = '';\n  usuarioActualId: number | null = null;\n  esEstudiante = false;\n  esProfesor = false;\n\n  constructor(\n    private ruta: ActivatedRoute,\n    private materiaServicio: MateriaServicio,\n    private autenticacionServicio: AutenticacionServicio,\n    private inscripcionServicio: InscripcionServicio\n  ) { }\n\n  ngOnInit(): void {\n    // Obtener el ID del usuario actual desde el servicio de autenticación\n    const usuarioActual = this.autenticacionServicio.obtenerUsuarioActual().subscribe(user => {\n      if (user && user.id) {\n        this.usuarioActualId = user.id;\n      }\n    });\n    \n    this.esEstudiante = this.autenticacionServicio.esEstudiante();\n    this.esProfesor = this.autenticacionServicio.esProfesor && this.autenticacionServicio.esProfesor();\n    this.ruta.params.subscribe(params => {\n      const id = params['id'];\n      if (id && !isNaN(Number(id))) {\n        const materiaId = Number(id);\n        this.cargarMateria(materiaId);\n        if (!this.esEstudiante) {\n          this.cargarEstudiantes(materiaId);\n        } else if (this.usuarioActualId) {\n          this.cargarCompaneros(materiaId, this.usuarioActualId);\n        }\n      } else {\n        this.error = 'ID de materia invu00e1lido';\n      }\n    });\n  }\n\n  cargarMateria(id: number): void {\n    if (!id || isNaN(id)) {\n      this.error = 'ID de materia invu00e1lido';\n      return;\n    }\n    this.cargando = true;\n    this.materiaServicio.obtenerMateria(id).subscribe({\n      next: (data) => {\n        this.materia = data;\n        this.cargando = false;\n      },\n      error: (err) => {\n        this.error = 'Error al cargar datos de la materia';\n        this.cargando = false;\n        console.error(err);\n      }\n    });\n  }\n\n  cargarEstudiantes(materiaId: number): void {\n    if (!materiaId || isNaN(materiaId)) {\n      this.error = 'ID de materia invu00e1lido';\n      return;\n    }\n    this.cargando = true;\n    this.materiaServicio.obtenerEstudiantesPorMateria(materiaId, this.esProfesor).subscribe({\n      next: (data) => {\n        this.estudiantes = data;\n        this.cargando = false;\n      },\n      error: (err) => {\n        if (err.message === 'NO_PERMISOS') {\n          this.error = 'No tienes permisos para ver los estudiantes de esta materia.';\n        } else if (err.message === 'NO_ENCONTRADO') {\n          this.error = 'Materia no encontrada.';\n        } else {\n          this.error = 'Error al cargar estudiantes de la materia';\n        }\n        this.cargando = false;\n        console.error(err);\n      }\n    });\n  }\n\n  cargarCompaneros(materiaId: number, estudianteId: number): void {\n    if (!materiaId || isNaN(materiaId) || !estudianteId || isNaN(estudianteId)) {\n      this.error = 'ID de materia o estudiante invu00e1lido';\n      return;\n    }\n    this.cargando = true;\n    this.inscripcionServicio.obtenerInscripcionesAsignatura(materiaId).subscribe({\n      next: (data: any) => {\n        console.log('Inscripciones obtenidas:', data);\n        this.companeros = data;\n        this.cargando = false;\n      },\n      error: (err: any) => {\n        this.error = 'Error al cargar compau00f1eros de clase';\n        this.cargando = false;\n        console.error(err);\n      }\n    });\n  }\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}