{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"../../servicios/estudiante.servicio\";\nimport * as i3 from \"../../servicios/asignatura.servicio\";\nimport * as i4 from \"../../servicios/inscripcion.servicio\";\nimport * as i5 from \"../../servicios/autenticacion.servicio\";\nfunction DetalleEstudianteComponente_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 4);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.error, \" \");\n  }\n}\nfunction DetalleEstudianteComponente_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 5)(1, \"div\", 6)(2, \"span\", 7);\n    i0.ɵɵtext(3, \"Cargando...\");\n    i0.ɵɵelementEnd()()();\n  }\n}\nconst _c0 = function (a1) {\n  return [\"/estudiantes\", a1, \"editar\"];\n};\nfunction DetalleEstudianteComponente_div_3_button_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"button\", 27);\n    i0.ɵɵtext(1, \"Editar\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(1, _c0, ctx_r3.estudiante.id));\n  }\n}\nfunction DetalleEstudianteComponente_div_3_div_36_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 4);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r4.errorInscripcion, \" \");\n  }\n}\nfunction DetalleEstudianteComponente_div_3_div_37_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 28);\n    i0.ɵɵtext(1, \" No hay asignaturas inscritas. \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction DetalleEstudianteComponente_div_3_div_38_th_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\");\n    i0.ɵɵtext(1, \"Acciones\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction DetalleEstudianteComponente_div_3_div_38_tr_14_td_22_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r14 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"td\")(1, \"button\", 43);\n    i0.ɵɵlistener(\"click\", function DetalleEstudianteComponente_div_3_div_38_tr_14_td_22_Template_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r14);\n      const ins_r10 = i0.ɵɵnextContext().$implicit;\n      const ctx_r12 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r12.desinscribirAsignatura(ins_r10.id));\n    });\n    i0.ɵɵelement(2, \"i\", 44);\n    i0.ɵɵtext(3, \" Eliminar \");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction DetalleEstudianteComponente_div_3_div_38_tr_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\")(8, \"button\", 32);\n    i0.ɵɵtext(9, \" Ver compa\\u00F1eros \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"div\", 33)(11, \"div\", 34)(12, \"div\", 35)(13, \"div\", 36)(14, \"h5\", 37);\n    i0.ɵɵtext(15);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(16, \"button\", 38);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(17, \"div\", 39);\n    i0.ɵɵelement(18, \"app-companeros\", 40);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(19, \"div\", 41)(20, \"button\", 42);\n    i0.ɵɵtext(21, \"Cerrar\");\n    i0.ɵɵelementEnd()()()()()();\n    i0.ɵɵtemplate(22, DetalleEstudianteComponente_div_3_div_38_tr_14_td_22_Template, 4, 0, \"td\", 3);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ins_r10 = ctx.$implicit;\n    const ctx_r9 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ins_r10.nombreMateria || \"No disponible\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ins_r10.creditos || \"No disponible\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ins_r10.nombreProfesor || \"No asignado\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵattribute(\"data-bs-target\", \"#companerosModal-\" + ins_r10.id);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"id\", \"companerosModal-\" + ins_r10.id);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate1(\"Compa\\u00F1eros de \", ins_r10.nombreMateria, \"\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"asignaturaId\", ins_r10.materiaId)(\"estudianteActualId\", ctx_r9.estudiante.id);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngIf\", ctx_r9.esUsuarioActual || ctx_r9.esAdmin);\n  }\n}\nfunction DetalleEstudianteComponente_div_3_div_38_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 29)(1, \"table\", 30)(2, \"thead\")(3, \"tr\")(4, \"th\");\n    i0.ɵɵtext(5, \"Asignatura\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"th\");\n    i0.ɵɵtext(7, \"Cr\\u00E9ditos\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"th\");\n    i0.ɵɵtext(9, \"Profesor\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"th\");\n    i0.ɵɵtext(11, \"Compa\\u00F1eros\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(12, DetalleEstudianteComponente_div_3_div_38_th_12_Template, 2, 0, \"th\", 3);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(13, \"tbody\");\n    i0.ɵɵtemplate(14, DetalleEstudianteComponente_div_3_div_38_tr_14_Template, 23, 9, \"tr\", 31);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r6 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(12);\n    i0.ɵɵproperty(\"ngIf\", ctx_r6.esUsuarioActual || ctx_r6.esAdmin);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r6.inscripciones);\n  }\n}\nfunction DetalleEstudianteComponente_div_3_div_39_option_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 52);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const asignatura_r16 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", asignatura_r16.id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate2(\" \", asignatura_r16.nombre, \" - Prof. \", asignatura_r16.profesor == null ? null : asignatura_r16.profesor.nombre, \" \");\n  }\n}\nfunction DetalleEstudianteComponente_div_3_div_39_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r18 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 45)(1, \"h5\");\n    i0.ɵɵtext(2, \"Inscribir Nueva Asignatura\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 46)(4, \"div\", 20)(5, \"select\", 47);\n    i0.ɵɵlistener(\"ngModelChange\", function DetalleEstudianteComponente_div_3_div_39_Template_select_ngModelChange_5_listener($event) {\n      i0.ɵɵrestoreView(_r18);\n      const ctx_r17 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r17.asignaturaSeleccionadaId = $event);\n    });\n    i0.ɵɵelementStart(6, \"option\", 48);\n    i0.ɵɵtext(7, \"Seleccionar asignatura...\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(8, DetalleEstudianteComponente_div_3_div_39_option_8_Template, 2, 3, \"option\", 49);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(9, \"div\", 13)(10, \"button\", 50);\n    i0.ɵɵlistener(\"click\", function DetalleEstudianteComponente_div_3_div_39_Template_button_click_10_listener() {\n      i0.ɵɵrestoreView(_r18);\n      const ctx_r19 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r19.registrarAsignatura());\n    });\n    i0.ɵɵelement(11, \"i\", 51);\n    i0.ɵɵtext(12, \" Inscribir \");\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const ctx_r7 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngModel\", ctx_r7.asignaturaSeleccionadaId);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngValue\", null);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r7.asignaturasDisponibles);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"disabled\", !ctx_r7.asignaturaSeleccionadaId || ctx_r7.cargando);\n  }\n}\nfunction DetalleEstudianteComponente_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"div\", 8)(2, \"h2\");\n    i0.ɵɵtext(3, \"Detalle del Estudiante\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"div\", 9)(5, \"button\", 10);\n    i0.ɵɵtext(6, \"Volver\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(7, DetalleEstudianteComponente_div_3_button_7_Template, 2, 3, \"button\", 11);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(8, \"div\", 12)(9, \"div\", 13)(10, \"div\", 14)(11, \"div\", 15)(12, \"h5\", 16);\n    i0.ɵɵtext(13, \"Informaci\\u00F3n Personal\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(14, \"div\", 17)(15, \"div\", 18)(16, \"strong\");\n    i0.ɵɵtext(17, \"Matr\\u00EDcula:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(18);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(19, \"div\", 18)(20, \"strong\");\n    i0.ɵɵtext(21, \"Nombre:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(22);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(23, \"div\", 18)(24, \"strong\");\n    i0.ɵɵtext(25, \"Correo Electr\\u00F3nico:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(26);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelement(27, \"app-creditos-estudiante\", 19);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(28, \"div\", 20)(29, \"div\", 21)(30, \"div\", 22)(31, \"h5\", 16);\n    i0.ɵɵtext(32, \"Asignaturas Inscritas\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(33, \"span\", 23);\n    i0.ɵɵtext(34);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(35, \"div\", 17);\n    i0.ɵɵtemplate(36, DetalleEstudianteComponente_div_3_div_36_Template, 2, 1, \"div\", 1);\n    i0.ɵɵtemplate(37, DetalleEstudianteComponente_div_3_div_37_Template, 2, 0, \"div\", 24);\n    i0.ɵɵtemplate(38, DetalleEstudianteComponente_div_3_div_38_Template, 15, 2, \"div\", 25);\n    i0.ɵɵtemplate(39, DetalleEstudianteComponente_div_3_div_39_Template, 13, 4, \"div\", 26);\n    i0.ɵɵelementEnd()()()()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(7);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.esAdmin);\n    i0.ɵɵadvance(11);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r2.estudiante.matricula, \" \");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r2.estudiante.nombre, \" \");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r2.estudiante.email, \" \");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"estudianteId\", ctx_r2.estudiante.id);\n    i0.ɵɵadvance(7);\n    i0.ɵɵtextInterpolate1(\"\", ctx_r2.inscripciones.length, \"/3 Asignaturas\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.errorInscripcion);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.inscripciones.length === 0);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.inscripciones.length > 0);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", (ctx_r2.esUsuarioActual || ctx_r2.esAdmin) && ctx_r2.inscripciones.length < 3);\n  }\n}\nexport class DetalleEstudianteComponente {\n  constructor(ruta, router, estudianteServicio, asignaturaServicio, inscripcionServicio, autenticacionServicio) {\n    this.ruta = ruta;\n    this.router = router;\n    this.estudianteServicio = estudianteServicio;\n    this.asignaturaServicio = asignaturaServicio;\n    this.inscripcionServicio = inscripcionServicio;\n    this.autenticacionServicio = autenticacionServicio;\n    this.estudiante = null;\n    this.inscripciones = [];\n    this.asignaturasDisponibles = [];\n    this.asignaturaSeleccionadaId = null;\n    this.cargando = false;\n    this.error = '';\n    this.errorInscripcion = '';\n    this.esAdmin = false;\n    this.esUsuarioActual = false;\n  }\n  ngOnInit() {\n    this.esAdmin = this.autenticacionServicio.esAdmin();\n    this.ruta.params.subscribe(params => {\n      const id = +params['id'];\n      this.cargarEstudiante(id);\n      this.cargarInscripciones(id);\n      const usuarioActualId = this.autenticacionServicio.obtenerIdUsuarioActual();\n      this.esUsuarioActual = usuarioActualId === id;\n    });\n    this.cargarAsignaturas();\n  }\n  cargarEstudiante(id) {\n    this.cargando = true;\n    this.estudianteServicio.obtenerEstudiante(id).subscribe({\n      next: datos => {\n        this.estudiante = datos;\n        this.cargando = false;\n      },\n      error: err => {\n        this.error = 'Error al cargar datos del estudiante';\n        this.cargando = false;\n        console.error(err);\n      }\n    });\n  }\n  cargarInscripciones(idEstudiante) {\n    this.cargando = true;\n    this.estudianteServicio.obtenerInscripcionesEstudiante(idEstudiante).subscribe({\n      next: datos => {\n        console.log('Inscripciones del estudiante obtenidas:', datos);\n        this.inscripciones = datos;\n        // Cargar las asignaturas disponibles después de obtener las inscripciones\n        this.cargarAsignaturas();\n        this.cargando = false;\n      },\n      error: err => {\n        this.error = 'Error al cargar inscripciones del estudiante';\n        this.cargando = false;\n        console.error('Error al cargar inscripciones:', err);\n      }\n    });\n  }\n  cargarAsignaturas() {\n    this.asignaturaServicio.obtenerAsignaturas().subscribe({\n      next: datos => {\n        this.asignaturasDisponibles = datos;\n        this.actualizarAsignaturasDisponibles();\n      },\n      error: err => {\n        console.error('Error al cargar asignaturas', err);\n      }\n    });\n  }\n  actualizarAsignaturasDisponibles() {\n    if (this.inscripciones.length > 0 && this.asignaturasDisponibles.length > 0) {\n      const idsAsignaturasInscritas = this.inscripciones.map(i => i.materiaId);\n      const idsProfesoresInscritos = this.inscripciones.map(i => this.asignaturasDisponibles.find(a => a.id === i.materiaId)?.profesorId).filter(id => id !== undefined);\n      this.asignaturasDisponibles = this.asignaturasDisponibles.filter(asignatura => !idsAsignaturasInscritas.includes(asignatura.id) && !idsProfesoresInscritos.includes(asignatura.profesorId));\n    }\n  }\n  registrarAsignatura() {\n    if (!this.estudiante || !this.asignaturaSeleccionadaId) {\n      this.errorInscripcion = 'Debe seleccionar una asignatura';\n      return;\n    }\n    if (this.inscripciones.length >= 3) {\n      this.errorInscripcion = 'Ya ha inscrito el máximo de 3 asignaturas permitidas';\n      return;\n    }\n    this.cargando = true;\n    this.errorInscripcion = '';\n    this.inscripcionServicio.inscribirAsignatura({\n      estudianteId: this.estudiante.id,\n      materiaId: this.asignaturaSeleccionadaId\n    }).subscribe({\n      next: () => {\n        this.cargando = false;\n        this.cargarInscripciones(this.estudiante.id);\n        this.asignaturaSeleccionadaId = null;\n      },\n      error: err => {\n        this.errorInscripcion = err.message || 'Error al inscribir asignatura';\n        this.cargando = false;\n        console.error(err);\n      }\n    });\n  }\n  desinscribirAsignatura(idInscripcion) {\n    if (confirm('¿Está seguro de eliminar esta inscripción?')) {\n      this.cargando = true;\n      this.inscripcionServicio.desinscribirAsignatura(idInscripcion).subscribe({\n        next: () => {\n          this.cargando = false;\n          this.cargarInscripciones(this.estudiante.id);\n        },\n        error: err => {\n          this.error = 'Error al eliminar inscripción';\n          this.cargando = false;\n          console.error(err);\n        }\n      });\n    }\n  }\n  static {\n    this.ɵfac = function DetalleEstudianteComponente_Factory(t) {\n      return new (t || DetalleEstudianteComponente)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.EstudianteServicio), i0.ɵɵdirectiveInject(i3.AsignaturaServicio), i0.ɵɵdirectiveInject(i4.InscripcionServicio), i0.ɵɵdirectiveInject(i5.AutenticacionServicio));\n    };\n  }\n  static {\n    this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: DetalleEstudianteComponente,\n      selectors: [[\"app-detalle-estudiante\"]],\n      decls: 4,\n      vars: 3,\n      consts: [[1, \"container\", \"mt-4\"], [\"class\", \"alert alert-danger\", 4, \"ngIf\"], [\"class\", \"d-flex justify-content-center\", 4, \"ngIf\"], [4, \"ngIf\"], [1, \"alert\", \"alert-danger\"], [1, \"d-flex\", \"justify-content-center\"], [\"role\", \"status\", 1, \"spinner-border\"], [1, \"visually-hidden\"], [1, \"d-flex\", \"justify-content-between\", \"align-items-center\", \"mb-4\"], [1, \"btn-group\"], [\"routerLink\", \"/estudiantes\", 1, \"btn\", \"btn-outline-secondary\"], [\"class\", \"btn btn-outline-primary\", 3, \"routerLink\", 4, \"ngIf\"], [1, \"row\"], [1, \"col-md-4\"], [1, \"card\", \"mb-4\"], [1, \"card-header\", \"bg-primary\", \"text-white\"], [1, \"mb-0\"], [1, \"card-body\"], [1, \"mb-3\"], [3, \"estudianteId\"], [1, \"col-md-8\"], [1, \"card\"], [1, \"card-header\", \"bg-primary\", \"text-white\", \"d-flex\", \"justify-content-between\", \"align-items-center\"], [1, \"badge\", \"bg-light\", \"text-dark\"], [\"class\", \"alert alert-info\", 4, \"ngIf\"], [\"class\", \"table-responsive\", 4, \"ngIf\"], [\"class\", \"mt-4\", 4, \"ngIf\"], [1, \"btn\", \"btn-outline-primary\", 3, \"routerLink\"], [1, \"alert\", \"alert-info\"], [1, \"table-responsive\"], [1, \"table\", \"table-striped\"], [4, \"ngFor\", \"ngForOf\"], [\"type\", \"button\", \"data-bs-toggle\", \"modal\", 1, \"btn\", \"btn-sm\", \"btn-outline-info\"], [\"tabindex\", \"-1\", \"aria-labelledby\", \"companerosModalLabel\", \"aria-hidden\", \"true\", \"data-bs-backdrop\", \"static\", 1, \"modal\", \"fade\", \"companeros-modal\", 3, \"id\"], [1, \"modal-dialog\", \"modal-lg\"], [1, \"modal-content\"], [1, \"modal-header\", \"bg-primary\", \"text-white\"], [\"id\", \"companerosModalLabel\", 1, \"modal-title\"], [\"type\", \"button\", \"data-bs-dismiss\", \"modal\", \"aria-label\", \"Close\", 1, \"btn-close\", \"btn-close-white\"], [1, \"modal-body\"], [3, \"asignaturaId\", \"estudianteActualId\"], [1, \"modal-footer\"], [\"type\", \"button\", \"data-bs-dismiss\", \"modal\", 1, \"btn\", \"btn-secondary\"], [1, \"btn\", \"btn-sm\", \"btn-outline-danger\", 3, \"click\"], [1, \"bi\", \"bi-trash\"], [1, \"mt-4\"], [1, \"row\", \"g-3\", \"align-items-center\"], [1, \"form-select\", 3, \"ngModel\", \"ngModelChange\"], [3, \"ngValue\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [1, \"btn\", \"btn-primary\", 3, \"disabled\", \"click\"], [1, \"bi\", \"bi-plus-circle\"], [3, \"value\"]],\n      template: function DetalleEstudianteComponente_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0);\n          i0.ɵɵtemplate(1, DetalleEstudianteComponente_div_1_Template, 2, 1, \"div\", 1);\n          i0.ɵɵtemplate(2, DetalleEstudianteComponente_div_2_Template, 4, 0, \"div\", 2);\n          i0.ɵɵtemplate(3, DetalleEstudianteComponente_div_3_Template, 40, 10, \"div\", 3);\n          i0.ɵɵelementEnd();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", ctx.error);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", ctx.cargando);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", ctx.estudiante && !ctx.cargando);\n        }\n      },\n      styles: [\".card[_ngcontent-%COMP%] {\\n  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\\n  margin-bottom: 20px;\\n}\\n.card-header[_ngcontent-%COMP%] {\\n  font-weight: 500;\\n}\\n.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%] {\\n  font-weight: 600;\\n  background-color: #f8f9fa;\\n}\\n.badge[_ngcontent-%COMP%] {\\n  font-size: 85%;\\n  padding: 5px 10px;\\n}\\nstrong[_ngcontent-%COMP%] {\\n  font-weight: 600;\\n}\\n.modal-backdrop[_ngcontent-%COMP%] {\\n  opacity: 0.5 !important;\\n}\\n.modal[_ngcontent-%COMP%] {\\n  z-index: 1050 !important;\\n}\\n.modal-content[_ngcontent-%COMP%] {\\n  z-index: 1060 !important;\\n}\\n.modal-header[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%] {\\n  opacity: 1;\\n  z-index: 1070 !important;\\n  position: relative;\\n}\\n.modal-footer[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%] {\\n  z-index: 1070 !important;\\n  position: relative;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY29tcG9uZW50ZXMvZXN0dWRpYW50ZXMvZGV0YWxsZS1lc3R1ZGlhbnRlLmNvbXBvbmVudGUuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLHVDQUF1QztBQUN2QztFQUNFLHdDQUF3QztFQUN4QyxtQkFBbUI7QUFDckI7QUFDQTtFQUNFLGdCQUFnQjtBQUNsQjtBQUNBO0VBQ0UsZ0JBQWdCO0VBQ2hCLHlCQUF5QjtBQUMzQjtBQUNBO0VBQ0UsY0FBYztFQUNkLGlCQUFpQjtBQUNuQjtBQUNBO0VBQ0UsZ0JBQWdCO0FBQ2xCO0FBQ0E7RUFDRSx1QkFBdUI7QUFDekI7QUFDQTtFQUNFLHdCQUF3QjtBQUMxQjtBQUNBO0VBQ0Usd0JBQXdCO0FBQzFCO0FBQ0E7RUFDRSxVQUFVO0VBQ1Ysd0JBQXdCO0VBQ3hCLGtCQUFrQjtBQUNwQjtBQUNBO0VBQ0Usd0JBQXdCO0VBQ3hCLGtCQUFrQjtBQUNwQiIsInNvdXJjZXNDb250ZW50IjpbIi8qIEVzdGlsb3MgcGFyYSBEZXRhbGxlIGRlIEVzdHVkaWFudGUgKi9cbi5jYXJkIHtcbiAgYm94LXNoYWRvdzogMCA0cHggOHB4IHJnYmEoMCwgMCwgMCwgMC4xKTtcbiAgbWFyZ2luLWJvdHRvbTogMjBweDtcbn1cbi5jYXJkLWhlYWRlciB7XG4gIGZvbnQtd2VpZ2h0OiA1MDA7XG59XG4udGFibGUgdGgge1xuICBmb250LXdlaWdodDogNjAwO1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjhmOWZhO1xufVxuLmJhZGdlIHtcbiAgZm9udC1zaXplOiA4NSU7XG4gIHBhZGRpbmc6IDVweCAxMHB4O1xufVxuc3Ryb25nIHtcbiAgZm9udC13ZWlnaHQ6IDYwMDtcbn1cbi5tb2RhbC1iYWNrZHJvcCB7XG4gIG9wYWNpdHk6IDAuNSAhaW1wb3J0YW50O1xufVxuLm1vZGFsIHtcbiAgei1pbmRleDogMTA1MCAhaW1wb3J0YW50O1xufVxuLm1vZGFsLWNvbnRlbnQge1xuICB6LWluZGV4OiAxMDYwICFpbXBvcnRhbnQ7XG59XG4ubW9kYWwtaGVhZGVyIC5idG4tY2xvc2Uge1xuICBvcGFjaXR5OiAxO1xuICB6LWluZGV4OiAxMDcwICFpbXBvcnRhbnQ7XG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcbn1cbi5tb2RhbC1mb290ZXIgLmJ0biB7XG4gIHotaW5kZXg6IDEwNzAgIWltcG9ydGFudDtcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xufVxuIl0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n    });\n  }\n}","map":{"version":3,"mappings":"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","names":["i0","DetalleEstudianteComponente","constructor","ruta","router","estudianteServicio","asignaturaServicio","inscripcionServicio","autenticacionServicio","ngOnInit","esAdmin","params","subscribe","id","cargarEstudiante","cargarInscripciones","usuarioActualId","obtenerIdUsuarioActual","esUsuarioActual","cargarAsignaturas","cargando","obtenerEstudiante","next","datos","estudiante","error","err","console","idEstudiante","obtenerInscripcionesEstudiante","log","inscripciones","obtenerAsignaturas","asignaturasDisponibles","actualizarAsignaturasDisponibles","length","idsAsignaturasInscritas","map","i","materiaId","idsProfesoresInscritos","find","a","profesorId","filter","undefined","asignatura","includes","registrarAsignatura","asignaturaSeleccionadaId","errorInscripcion","inscribirAsignatura","estudianteId","message","desinscribirAsignatura","idInscripcion","confirm","selectors","decls","vars","consts","template"],"sourceRoot":"","sources":["C:\\Users\\hansk\\Videos\\frontendsistemacolegio.interrapidisi\\frontendsistemacolegio.interrapidisi\\src\\app\\componentes\\estudiantes\\detalle-estudiante.componente.html","C:\\Users\\hansk\\Videos\\frontendsistemacolegio.interrapidisi\\frontendsistemacolegio.interrapidisi\\src\\app\\componentes\\estudiantes\\detalle-estudiante.componente.ts"],"sourcesContent":["<div class=\"container mt-4\">\n  <div *ngIf=\"error\" class=\"alert alert-danger\">\n    {{ error }}\n  </div>\n  <div *ngIf=\"cargando\" class=\"d-flex justify-content-center\">\n    <div class=\"spinner-border\" role=\"status\">\n      <span class=\"visually-hidden\">Cargando...</span>\n    </div>\n  </div>\n  <div *ngIf=\"estudiante && !cargando\">\n    <div class=\"d-flex justify-content-between align-items-center mb-4\">\n      <h2>Detalle del Estudiante</h2>\n      <div class=\"btn-group\">\n        <button class=\"btn btn-outline-secondary\" routerLink=\"/estudiantes\">Volver</button>\n        <button class=\"btn btn-outline-primary\" [routerLink]=\"['/estudiantes', estudiante.id, 'editar']\" *ngIf=\"esAdmin\">Editar</button>\n      </div>\n    </div>\n    <div class=\"row\">\n      <div class=\"col-md-4\">\n        <div class=\"card mb-4\">\n          <div class=\"card-header bg-primary text-white\">\n            <h5 class=\"mb-0\">Información Personal</h5>\n          </div>\n          <div class=\"card-body\">\n            <div class=\"mb-3\">\n              <strong>Matrícula:</strong> {{ estudiante.matricula }}\n            </div>\n            <div class=\"mb-3\">\n              <strong>Nombre:</strong> {{ estudiante.nombre }}\n            </div>\n            <div class=\"mb-3\">\n              <strong>Correo Electrónico:</strong> {{ estudiante.email }}\n            </div>\n          </div>\n        </div>\n        <app-creditos-estudiante [estudianteId]=\"estudiante.id!\"></app-creditos-estudiante>\n      </div>\n      <div class=\"col-md-8\">\n        <div class=\"card\">\n          <div class=\"card-header bg-primary text-white d-flex justify-content-between align-items-center\">\n            <h5 class=\"mb-0\">Asignaturas Inscritas</h5>\n            <span class=\"badge bg-light text-dark\">{{ inscripciones.length }}/3 Asignaturas</span>\n          </div>\n          <div class=\"card-body\">\n            <div *ngIf=\"errorInscripcion\" class=\"alert alert-danger\">\n              {{ errorInscripcion }}\n            </div>\n            <div *ngIf=\"inscripciones.length === 0\" class=\"alert alert-info\">\n              No hay asignaturas inscritas.\n            </div>\n            <div class=\"table-responsive\" *ngIf=\"inscripciones.length > 0\">\n              <table class=\"table table-striped\">\n                <thead>\n                  <tr>\n                    <th>Asignatura</th>\n                    <th>Créditos</th>\n                    <th>Profesor</th>\n                    <th>Compañeros</th>\n                    <th *ngIf=\"esUsuarioActual || esAdmin\">Acciones</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  <tr *ngFor=\"let ins of inscripciones\">\n                    <td>{{ ins.nombreMateria || 'No disponible' }}</td>\n                    <td>{{ ins.creditos || 'No disponible' }}</td>\n                    <td>{{ ins.nombreProfesor || 'No asignado' }}</td>\n                    <td>\n                      <button class=\"btn btn-sm btn-outline-info\" type=\"button\" data-bs-toggle=\"modal\" [attr.data-bs-target]=\"'#companerosModal-' + ins.id\">\n                        Ver compañeros\n                      </button>\n                      <div class=\"modal fade companeros-modal\" [id]=\"'companerosModal-' + ins.id\" tabindex=\"-1\" aria-labelledby=\"companerosModalLabel\" aria-hidden=\"true\" data-bs-backdrop=\"static\">\n                        <div class=\"modal-dialog modal-lg\">\n                          <div class=\"modal-content\">\n                            <div class=\"modal-header bg-primary text-white\">\n                              <h5 class=\"modal-title\" id=\"companerosModalLabel\">Compañeros de {{ ins.nombreMateria }}</h5>\n                              <button type=\"button\" class=\"btn-close btn-close-white\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\n                            </div>\n                            <div class=\"modal-body\">\n                              <app-companeros [asignaturaId]=\"ins.materiaId\" [estudianteActualId]=\"estudiante.id!\"></app-companeros>\n                            </div>\n                            <div class=\"modal-footer\">\n                              <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cerrar</button>\n                            </div>\n                          </div>\n                        </div>\n                      </div>\n                    </td>\n                    <td *ngIf=\"esUsuarioActual || esAdmin\">\n                      <button class=\"btn btn-sm btn-outline-danger\" (click)=\"desinscribirAsignatura(ins.id!)\">\n                        <i class=\"bi bi-trash\"></i> Eliminar\n                      </button>\n                    </td>\n                  </tr>\n                </tbody>\n              </table>\n            </div>\n            <div *ngIf=\"(esUsuarioActual || esAdmin) && inscripciones.length < 3\" class=\"mt-4\">\n              <h5>Inscribir Nueva Asignatura</h5>\n              <div class=\"row g-3 align-items-center\">\n                <div class=\"col-md-8\">\n                  <select class=\"form-select\" [(ngModel)]=\"asignaturaSeleccionadaId\">\n                    <option [ngValue]=\"null\">Seleccionar asignatura...</option>\n                    <option *ngFor=\"let asignatura of asignaturasDisponibles\" [value]=\"asignatura.id\">\n                      {{ asignatura.nombre }} - Prof. {{ asignatura.profesor?.nombre }}\n                    </option>\n                  </select>\n                </div>\n                <div class=\"col-md-4\">\n                  <button \n                    class=\"btn btn-primary\" \n                    (click)=\"registrarAsignatura()\" \n                    [disabled]=\"!asignaturaSeleccionadaId || cargando\"\n                  >\n                    <i class=\"bi bi-plus-circle\"></i> Inscribir\n                  </button>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n","import { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { Estudiante } from '../../modelos/estudiante.modelo';\nimport { Inscripcion } from '../../modelos/inscripcion.modelo';\nimport { Asignatura } from '../../modelos/asignatura.modelo';\nimport { EstudianteServicio } from '../../servicios/estudiante.servicio';\nimport { AsignaturaServicio } from '../../servicios/asignatura.servicio';\nimport { InscripcionServicio } from '../../servicios/inscripcion.servicio';\nimport { AutenticacionServicio } from '../../servicios/autenticacion.servicio';\n\n@Component({\n  selector: 'app-detalle-estudiante',\n  templateUrl: './detalle-estudiante.componente.html',\n  styleUrls: ['./detalle-estudiante.componente.css']\n})\nexport class DetalleEstudianteComponente implements OnInit {\n  estudiante: Estudiante | null = null;\n  inscripciones: Inscripcion[] = [];\n  asignaturasDisponibles: Asignatura[] = [];\n  asignaturaSeleccionadaId: number | null = null;\n  cargando = false;\n  error = '';\n  errorInscripcion = '';\n  esAdmin = false;\n  esUsuarioActual = false;\n\n  constructor(\n    private ruta: ActivatedRoute,\n    private router: Router,\n    private estudianteServicio: EstudianteServicio,\n    private asignaturaServicio: AsignaturaServicio,\n    private inscripcionServicio: InscripcionServicio,\n    private autenticacionServicio: AutenticacionServicio\n  ) { }\n\n  ngOnInit(): void {\n    this.esAdmin = this.autenticacionServicio.esAdmin();\n    this.ruta.params.subscribe(params => {\n      const id = +params['id'];\n      this.cargarEstudiante(id);\n      this.cargarInscripciones(id);\n      const usuarioActualId = this.autenticacionServicio.obtenerIdUsuarioActual();\n      this.esUsuarioActual = usuarioActualId === id;\n    });\n    this.cargarAsignaturas();\n  }\n\n  cargarEstudiante(id: number): void {\n    this.cargando = true;\n    this.estudianteServicio.obtenerEstudiante(id).subscribe({\n      next: (datos) => {\n        this.estudiante = datos;\n        this.cargando = false;\n      },\n      error: (err) => {\n        this.error = 'Error al cargar datos del estudiante';\n        this.cargando = false;\n        console.error(err);\n      }\n    });\n  }\n\n  cargarInscripciones(idEstudiante: number): void {\n    this.cargando = true;\n    this.estudianteServicio.obtenerInscripcionesEstudiante(idEstudiante).subscribe({\n      next: (datos) => {\n        console.log('Inscripciones del estudiante obtenidas:', datos);\n        this.inscripciones = datos;\n        // Cargar las asignaturas disponibles después de obtener las inscripciones\n        this.cargarAsignaturas();\n        this.cargando = false;\n      },\n      error: (err) => {\n        this.error = 'Error al cargar inscripciones del estudiante';\n        this.cargando = false;\n        console.error('Error al cargar inscripciones:', err);\n      }\n    });\n  }\n\n  cargarAsignaturas(): void {\n    this.asignaturaServicio.obtenerAsignaturas().subscribe({\n      next: (datos) => {\n        this.asignaturasDisponibles = datos;\n        this.actualizarAsignaturasDisponibles();\n      },\n      error: (err) => {\n        console.error('Error al cargar asignaturas', err);\n      }\n    });\n  }\n\n  actualizarAsignaturasDisponibles(): void {\n    if (this.inscripciones.length > 0 && this.asignaturasDisponibles.length > 0) {\n      const idsAsignaturasInscritas = this.inscripciones.map(i => i.materiaId);\n      const idsProfesoresInscritos = this.inscripciones\n        .map(i => this.asignaturasDisponibles.find(a => a.id === i.materiaId)?.profesorId)\n        .filter(id => id !== undefined) as number[];\n      this.asignaturasDisponibles = this.asignaturasDisponibles.filter(asignatura =>\n        !idsAsignaturasInscritas.includes(asignatura.id) &&\n        !idsProfesoresInscritos.includes(asignatura.profesorId)\n      );\n    }\n  }\n\n  registrarAsignatura(): void {\n    if (!this.estudiante || !this.asignaturaSeleccionadaId) {\n      this.errorInscripcion = 'Debe seleccionar una asignatura';\n      return;\n    }\n    if (this.inscripciones.length >= 3) {\n      this.errorInscripcion = 'Ya ha inscrito el máximo de 3 asignaturas permitidas';\n      return;\n    }\n    this.cargando = true;\n    this.errorInscripcion = '';\n    this.inscripcionServicio.inscribirAsignatura({\n      estudianteId: this.estudiante.id!,\n      materiaId: this.asignaturaSeleccionadaId\n    }).subscribe({\n      next: () => {\n        this.cargando = false;\n        this.cargarInscripciones(this.estudiante!.id!);\n        this.asignaturaSeleccionadaId = null;\n      },\n      error: (err: any) => {\n        this.errorInscripcion = err.message || 'Error al inscribir asignatura';\n        this.cargando = false;\n        console.error(err);\n      }\n    });\n  }\n\n  desinscribirAsignatura(idInscripcion: number): void {\n    if (confirm('¿Está seguro de eliminar esta inscripción?')) {\n      this.cargando = true;\n      this.inscripcionServicio.desinscribirAsignatura(idInscripcion).subscribe({\n        next: () => {\n          this.cargando = false;\n          this.cargarInscripciones(this.estudiante!.id!);\n        },\n        error: (err: any) => {\n          this.error = 'Error al eliminar inscripción';\n          this.cargando = false;\n          console.error(err);\n        }\n      });\n    }\n  }\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}